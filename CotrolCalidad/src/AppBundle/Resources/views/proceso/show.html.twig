{% extends 'base.html.twig' %}
{% block referencia %}
     <ol class="breadcrumb">
        <li><a href="{{ path('dependencia_show', { 'id': proceso.macroProceso.dependencia.id }) }}"><i class="fa fa-dashboard"></i>Dependencia</a></li>

        <li>Proceso</li>
      </ol>
{% endblock %}
{% block body %}
    <div class="col-md-4">
          <!-- About Me Box -->
          <div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">{{ proceso.nombre }}</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
               <strong><i class="fa fa-qrcode margin-r-5"></i> Codigo </strong>
              <p>
                {% if proceso.codigo < 10 %}
                 <b> {{proceso.macroProceso.sigla | upper}}</b>0{{ proceso.codigo }}
                {% else %}
                    <b> {{proceso.macroProceso.sigla | upper}}</b>{{ proceso.codigo }}
                {% endif %}
              </p>
              <hr>
              <strong><i class="fa  fa-list margin-r-5"></i> Version </strong>
              <p>
                {% if proceso.archivos|length != 0 %}
                  {% for archivo in proceso.archivos %}
                      {% if archivo.estado %}
                          <div class="label label-success"> {{ archivo.version }}</div>
                      {% endif %}
                  {% endfor %}
                {% else %}
                  <h5 class="label label-danger"><i class="fa fa-clock-o"></i> No hay asignado ningun archivo</h5>
                {% endif %}
              </p>
              <hr>
              <strong><i class="fa fa-calendar margin-r-5"></i>Vigencia </strong>
              <p>{{proceso.vigencia}}</p>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->
        </div>

            <div  class="col-md-1">

              <a data-toggle="tooltip"data-original-title="Archivo de proceso" href="{{ path('archivo_new', { 'idProceso': proceso.id }) }}" class="btn btn-app">
                    <i class="fa fa-plus"></i> Archivo 
                  </a>
                <br>
              
                <a data-toggle="tooltip"data-original-title="Editar proceso" href="{{ path('proceso_edit', { 'id': proceso.id }) }}" class="btn btn-app">
                    <i class="fa fa-edit"></i> Editar
                  </a>
                <br>

                <a data-toggle="tooltip"data-original-title="Eliminar proceso" href="{{ path('proceso_delete', { 'id': proceso.id }) }}" class="btn btn-app">
                    <i class="fa fa-trash"></i> Eliminar
                  </a>
                <br>

                <a data-toggle="tooltip"data-original-title="Asignar Procedimiento" href="{{ path('procedimiento_new', { 'idProceso': proceso.id }) }}" class="btn btn-app">
                    <i class="fa fa-plus"></i> <small>Procedimiento</small>
                  </a>
                <br>

            </div>

          <div  class="col-md-7">
            <div class="nav-tabs-custom">
              <ul class="nav nav-tabs">
                <li class="active"><a href="#activity" data-toggle="tab" aria-expanded="false">Archivos</a></li>
                <li class=""><a href="#timeline" data-toggle="tab" aria-expanded="false">Usuarios</a></li>
                <li class=""><a href="#Indicadores" data-toggle="tab" aria-expanded="false">Indicadores</a></li>
                <li class=""><a href="#Riesgos" data-toggle="tab" aria-expanded="false">Riesgos</a></li>
              </ul>
              <div class="tab-content">
                <div class="tab-pane active" id="activity">
                        <table  class="table display">
                            <thead>
                                <tr>
                                   
                                    <th>Version</th>
                                    <th>Control de Cambios</th>
                                    <th>Documento</th>
                                    <th>Documento PDF</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for archivo in proceso.archivos %}
                                <tr>
                                    <td>
                                      {% if archivo.estado %}
                                      <div data-toggle="tooltip"data-original-title="Vigente" class="label label-success">{{ archivo.version }}</div>
                                      {% else %}
                                         <div data-toggle="tooltip"data-original-title="Obsoleto" class="label label-danger">{{ archivo.version }}</div>
                                      {% endif %}

                                          
                                    </td>
                                    <td>{{ archivo.descripcion }}</td>
                                    
                                    <td><a data-toggle="tooltip"data-original-title="descargar" class="btn btn-primary" href="{{ path('documento_archivo_download', { 'id': archivo.id }) }}"><i class="fa  fa-cloud-download"></i></a></td>
                                    <td><a data-toggle="tooltip"data-original-title="descargar" class="btn btn-primary" href="{{ path('documento_pdf_archivo_download', { 'id': archivo.id }) }}"><i class="fa  fa-cloud-download"></i></a></td>
                                    <td>
                                        <div class="btn-group">
                                      <a data-toggle="tooltip"data-original-title="editar" href="{{ path('archivo_edit', { 'id': archivo.id }) }}" class="btn btn-default btn-flat btn-xs"><i class="fa fa-edit"></i></a>

                                    </div>
                                    </td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                 
                </div>
                <!-- /.tab-pane -->
                <div class="tab-pane" id="timeline">
                    <a href="{{ path('procesousuario_new', { 'idProceso': proceso.id }) }}" class="link-black text-sm"><i class="fa fa-plus"></i> Usuario</a>
                    <table  class="table display">
                        <thead>
                            <tr>  
                                <th>Nombre Usuario</th>
                                <th>Identificacion Usuario</th>
                                <th>Cargo</th>
                                <th>Role</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for procesoUsuario in proceso.procesosUsuarios %}
                            <tr>

                                <td>{{procesoUsuario.usuario.nombres}} {{procesoUsuario.usuario.apellidos}}</td>
                                <td>{{procesoUsuario.usuario.identificacion}}</td>
                                <td>{{procesoUsuario.usuario.cargo.nombre}}</td>
                                <td>{{procesoUsuario.role}}</td>
                                <td>
                                    <div class="btn-group">
                                      <a data-toggle="tooltip"data-original-title="ver" href="{{ path('usuario_show', { 'id': procesoUsuario.usuario.id }) }}" class="btn btn-default btn-flat btn-xs"><i class="fa fa-eye "></i></a>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>      
                   
                </div>
                <!-- /.tab-pane -->

                 <!-- /.tab-pane -->
                <div class="tab-pane" id="Indicadores">
                     <table class="table display3">
                      <a style="position: relative;top: 2.5em;" data-toggle="tooltip" data-original-title="Crear Indicador" href="{{ path('indicador_new', { 'idProceso': proceso.id }) }}" class="link-black text-sm">
                      <i class="fa fa-plus" ></i> Indicador 
                       </a>
                        <thead>
                            <tr>
                                <th>Codigo</th>
                                <th>Nombre</th>
                                <th>Tipo</th>
                                <th>Tablero</th>
                                <th>Unidadmedida</th>
                                <th>Periodicidad</th>
                                <th>Meta</th>
                                <th>Actions</th>
                            </tr> 
                        </thead>
                        <tbody>
                        {% for indicador in proceso.indicadores %}
                            <tr>
                                <td>
                                    {% if proceso.codigo < 10 %}{{proceso.macroProceso.sigla}}0{{proceso.codigo}}_{% if indicador.codigo < 10 %}00{{indicador.codigo}}{% else %}{{indicador.codigo}}{% endif %}{% else %}{{proceso.macroProceso.sigla}}{{proceso.codigo}}_{% if indicador.codigo < 10 %}00{{indicador.codigo}}{% else %}{{indicador.codigo}}{% endif %}{% endif %}
                                </td>
                                <td>{{ indicador.nombre }}</td>
                                
                                <td>{{ indicador.tipo }}</td>
                                <td>{{ indicador.tablero }}</td>
                                <td>{{ indicador.unidadMedida }}</td>
                                <td>{{ indicador.periodicidad }}</td>
                                <td>{{ indicador.meta }}</td>
                                <td>
                                    <ul>
                                        <div class="btn-group">
                                              <a data-toggle="tooltip"data-original-title="ver" href="{{ path('indicador_show', { 'id': indicador.id }) }}" class="btn btn-default btn-flat btn-xs"><i class="fa fa-eye"></i></a>
                                        </div>
                                    </ul>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <!-- /.tab-pane -->

                <div class="tab-pane" id="Riesgos">

                        <table  class="table display">
                            <thead>
                                <a style="position: relative;top: 2.5em;" data-toggle="tooltip" data-original-title="Crear Riesgo" href="{{ path('riesgo_new', { 'idProceso': proceso.id }) }}" class="link-black text-sm">
                                <i class="fa fa-plus" ></i> Riesgo 
                                 </a>
                                <tr>
                                    <th>Riesgos</th>
                                    <th>Accion Preventiva</th>
                                </tr>
                            </thead>
                            <tbody>
                             {% for riesgo in proceso.riesgos %}
                                <tr>
                                    <td>{{ riesgo.riesgo }}</td>
                                    <td>{{ riesgo.accionPreventiva }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                 
                </div>

                <!-- /.tab-pane -->
              </div>
              <!-- /.tab-content -->
            </div>
            <!-- /.nav-tabs-custom -->
           </div>

       
        
           {#  {{ form_start(delete_form) }}
                <a type="submit" value="Delete" class="btn btn-app">
                <i class="fa fa-edit"></i> Edit
                </a>
            {{ form_end(delete_form) }} #}
  
<div class="col-md-12">


  <div class="box box-default">
            <div class="box-header with-border">
              <h3 class="box-title">Procedimientos</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
                <table  class="table display" id="example40">
                  <thead>
                      <tr>
                          <th>Codigo</th>
                          <th>Nombre</th>
                          <th>Vigencia</th>
                          <th>Actions</th>
                      </tr>
                  </thead>
                  <tbody>
                  {% for procedimiento in proceso.procedimientos %}
                      <tr>
                          <td>
                            {% if procedimiento.codigo < 10 %}
                              0{{ procedimiento.codigo }}
                              {% else %}
                                 {{ procedimiento.codigo }} 
                            {% endif %}
                            
                          </td>
                          <td>{{ procedimiento.nombre }}</td>
                          <td>{{procedimiento.vigencia}}</td>
                          <td>
                              <div class="btn-group">
                                <a data-toggle="tooltip"data-original-title="ver" href="{{ path('procedimiento_show', { 'id': procedimiento.id }) }}" class="btn btn-default btn-flat"><i class="fa fa-eye"></i></a>
                                <a data-toggle="tooltip"data-original-title="editar" href="{{ path('procedimiento_edit', { 'id': procedimiento.id }) }}" class="btn btn-default btn-flat"><i class="fa fa-edit"></i></a>
                              </div>
                          </td>
                      </tr>
                  {% endfor %}
                  </tbody>
              </table>
            </div>
            <!-- /.box-body -->
          </div>
  </div> 

{% endblock %}
