{% extends 'base.html.twig' %}

{% block body %}


    <div class="col-md-3">
            <a href="{{ path('proceso_index') }}" class="link-black text-sm"><i class="fa fa-mail-reply margin-r-5"></i> Atras</a>

          <!-- About Me Box -->
          <div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">{{ procedimiento.nombre }}</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
              <strong><i class="fa fa-book margin-r-5"></i> Codigo </strong>
              <p>{{ procedimiento.codigo }}</p>
              <hr>
              <strong><i class="fa fa-map-marker margin-r-5"></i> Version </strong>
              <p>{{ procedimiento.version }}</p>
              <hr>
              <strong><i class="fa fa-pencil margin-r-5"></i>Vigencia </strong>
              <p>{% if procedimiento.vigencia %}{{ procedimiento.vigencia|date('Y-m-d') }}{% endif %}</p>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->
        </div>

            <div style="margin-top: 19px;" class="col-md-1">
                <a href="{{ path('procedimiento_edit', { 'id': procedimiento.id }) }}" class="btn btn-app">
                    <i class="fa fa-edit"></i> Editar
                  </a>
                <br>

                <a href="{{ path('procedimiento_delete', { 'id': procedimiento.id }) }}" class="btn btn-app">
                    <i class="fa fa-trash"></i> Eliminar
                  </a>
                <br>
                <a href="{{ path('archivo_new', { 'idProcedimiento': procedimiento.id }) }}" class="btn btn-app">
                    <i class="fa fa-plus"></i> Archivo
                  </a>
                <br>
                
            </div>

          <div style="margin-top: 19px;" class="col-md-8">
            <div class="nav-tabs-custom">
              <ul class="nav nav-tabs">
                
                <li class="active"><a href="#activity" data-toggle="tab" aria-expanded="false">Archivos</a></li>
                <li class=""><a href="#timeline" data-toggle="tab" aria-expanded="false">Usuarios</a></li>
              </ul>
              <div class="tab-content">
                <div class="tab-pane active" id="activity">
                    
                        <table class="table" id="example1">
                            <thead>
                                <tr>
                                   
                                    <th>Version</th>
                                    <th>Descripcion</th>
                                    <th>Estado</th>
                                    <th>Urldocumento</th>
                                    <th>Urldocumento PDF</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for archivo in procedimiento.archivos %}
                                <tr>
                                    <td>{{ archivo.version }}</td>
                                    <td>{{ archivo.descripcion }}</td>
                                    <td>{% if archivo.estado %}Yes{% else %}No{% endif %}</td>
                                    <td><a href="{{ path('documento_archivo_download', { 'id': archivo.id }) }}">Descargar</a></td>
                                    <td><a href="{{ path('documento_pdf_archivo_download', { 'id': archivo.id }) }}">Descargar</a></td>
                                    <td>
                                        <div class="btn-group">
                                      <a  href="{{ path('archivo_show', { 'id': archivo.id }) }}" class="btn btn-default btn-flat btn-xs"><i class="fa fa-eye "></i></a>
                                      <a href="{{ path('archivo_edit', { 'id': archivo.id }) }}" class="btn btn-default btn-flat btn-xs"><i class="fa fa-edit"></i></a>
                                    </div>
                                    </td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                 
                </div>
                <!-- /.tab-pane -->
                <div class="tab-pane" id="timeline">
                    <a href="{{ path('procedimientousuario_new', { 'idProcedimiento': procedimiento.id }) }}" class="link-black text-sm"><i class="fa fa-plus"></i> Usuario</a>
                    <table class="table" id="example2">
                        <thead>
                            <tr>  
                                <th>Nombre Usuario</th>
                                <th>Identificacion Usuario</th>
                                <th>Role</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for procedimientousuario in procedimiento.procedimientosUsuarios %}
                            <tr>

                                <td>{{procedimientousuario.usuario.nombres}} {{procedimientousuario.usuario.apellidos}}</td>
                                <td>{{procedimientousuario.usuario.identificacion}}</td>
                                <td>{{procedimientousuario.role}}</td>
                                <td>
                                    <div class="btn-group">
                                      <a  href="{{ path('usuario_show', { 'id': procedimientousuario.usuario.id }) }}" class="btn btn-default btn-flat btn-xs"><i class="fa fa-eye "></i></a>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>      
                   
                </div>
                <!-- /.tab-pane -->

               
                <!-- /.tab-pane -->
              </div>
              <!-- /.tab-content -->
            </div>
            <!-- /.nav-tabs-custom -->
           </div>

          

     <table class="table" id="example1">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nombre Documento</th>
                <th>Nombre Documento 2</th>
                <th>Tipo Documento</th>
                <th>Descargar</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for procedimientoDocumento in procedimiento.procedimientosDocumentos %}
            <tr>
                <td><a href="{{ path('procedimientodocumento_show', { 'id': procedimientoDocumento.id }) }}">{{ procedimientoDocumento.id }}</a></td>
                <td>{{procedimientoDocumento.documento.nombre}}</td>
                <td>{{procedimientoDocumento.procedimiento.proceso.macroProceso.sigla}}
                    {% 
                        set idProceso = procedimientoDocumento.procedimiento.proceso.id / 2
                     %}
                     {% if idProceso < 5 %}
                        0
                     {% endif %}
                    {{procedimientoDocumento.procedimiento.proceso.id}}_
                    {% 
                        set idProcedimiento = procedimientoDocumento.procedimiento.id / 2
                     %}
                     {% if idProcedimiento < 5 %}
                        0
                     {% endif %}
                    {{procedimientoDocumento.procedimiento.id}}_{{procedimientoDocumento.documento.tipoDocumento.sigla}}
                    {% 
                        set idDocumento = procedimientoDocumento.documento.id / 2
                     %}
                     {% if idDocumento < 5 %}
                        0
                     {% endif %}
                    {{procedimientoDocumento.documento.id}}</td>
                 <td>{{procedimientoDocumento.documento.tipoDocumento.nombre}}</td>
                <td><a href="{{ path('catalogo_marca_download', { 'id': procedimientoDocumento.documento.id }) }}">descargar</a></td>
                <td>
                    <ul>
                        <li>
                            <a href="{{ path('procedimientodocumento_show', { 'id': procedimientoDocumento.id }) }}">show</a>
                        </li>
                        <li>
                            <a href="{{ path('procedimientodocumento_edit', { 'id': procedimientoDocumento.id }) }}">edit</a>
                        </li>
                    </ul>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
